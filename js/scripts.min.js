(function($) {
	"use strict";

	function headlineFlip(element) {
		var headline1 = $(element),
			word1 = $(element + " > span:first-child"),
			word2 = $(element + " > span:last-child");
		var i = 0;
		var words = headline1.data("words");
		words = words.split(",");
		var time = Math.random() * 3e3 + 3e3;
		word1.text(words[i]);
		i++;
		word2.text(words[i]);
		setInterval(function() {
			headline1.hasClass("is-fliped") ? headline1.removeClass("is-fliped") : headline1.addClass("is-fliped");
			i == words.length - 1 ? i = 0 : i++;
			setTimeout(function() {
				headline1.hasClass("is-fliped") ? word1.text(words[i]) : word2.text(words[i])
			}, time / 10)
		}, time)
	}
	$(window).on("load", function() {
		$("#preloader").fadeOut("slow", function() {
			$(this).remove()
		})
	});
	$(document).on("ready", function() {
		headlineFlip("#headline1");
		headlineFlip("#headline2");
		$("[data-layer-animation]").each(function() {
			var $this = $(this);
			if (!$this.closest(".home-slider").length) {
				if ($this.data("layerAnimation")) {
					var animation = $this.data("layerAnimation")
				}
				$this.appear(function() {
					var delay = $this.data("animationDelay") ? $this.data("animationDelay") : 1;
					if (delay > 1) {
						$this.css("animation-delay", delay + "ms")
					}
					setTimeout(function() {
						$this.addClass(animation);
						$this.addClass("animated")
					}, delay)
				}, {
					accX: 0,
					accY: -20
				})
			}
		});
		var menu = $("#main-navigation"),
			menuOpenBtn = $("#menu-open"),
			menuCloseBtn = $("#menu-close"),
			menuItem = $('#menu-items li');
		menuOpenBtn.on("click", function() {
			menu.addClass("is-opened")
		});
		menuCloseBtn.on("click", function() {
			menu.removeClass("is-opened")
		});


		$("a[href^=#]").on("click", function() {
			$("html, body").animate({
				scrollTop: $($.attr(this, "href")).offset().top
			}, 800);
			menu.removeClass("is-opened")
			return false
		});
		
		var contactForm = $("#formContact");
		contactForm.on("submit", function(e) {
			var data = new FormData(this);
			$.ajax({
				type: "POST",
				url: "php/contact.php",
				data: data,
				contentType: false,
				processData: false,
				dataType: "json",
				success: function(result) {
					if (result.success == "1") {
						$("<div />", {
							class: "alert alert-success",
							role: "alert",
							html: "<strong>Thanks,</strong> Message Successfully Submitted !"
						}).prependTo(contactForm)
					} else {
						$("<div />", {
							class: "alert alert-danger",
							role: "alert",
							html: "<strong>Ooops !</strong> Something Went Wrong"
						}).prependTo(contactForm)
					}
				},
				error: function(data) {
					console.log(data.responseText);
					$("<div />", {
						class: "alert alert-danger",
						role: "alert",
						html: "<strong>Ooops !</strong> Something Went Wrong"
					}).prependTo(contactForm)
				}
			});
			e.preventDefault()
		});
		$("#subscribeForm").on("submit", function(e) {
			e.preventDefault()
		});
		$(".portfolio-grid").mixItUp();
		$("[data-background]").each(function() {
			$(this).css("background-image", "url(" + $(this).data("background") + ")")
		});
		$(".open-popup-link").magnificPopup({
			type: "inline",
			midClick: true
		});
		$(window).on("scroll", function() {
			var windowScroll = $(this).scrollTop();
			windowScroll > 100 ? $("#header").addClass("header-reverse") : $("#header").removeClass(
				"header-reverse")
		})
	})
})(jQuery);
